(function() {/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
'use strict';var aa=this||self;/*
 Copyright 2019 Glance Networks, Inc.
*/
var ba=["5","3","0","118"].slice(0,3).join(".");function h(a){for(a=a.toString();2>a.length;)a="0"+a;return a}Uint8Array.prototype.slice||(Uint8Array.prototype.slice=function(a,b){return new Uint8Array(this.subarray(a,b))});
ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(a,b){void 0===a&&(a=0);void 0===b&&(b=this.byteLength);a=Math.floor(a);b=Math.floor(b);0>a&&(a+=this.byteLength);0>b&&(b+=this.byteLength);a=Math.min(Math.max(0,a),this.byteLength);b=Math.min(Math.max(0,b),this.byteLength);if(0>=b-a)return new ArrayBuffer(0);var c=new ArrayBuffer(b-a),d=new Uint8Array(c);a=new Uint8Array(this,a,b-a);d.set(a);return c});
var l=navigator.userAgent.toLowerCase(),ca=l.match(/(edge)[\s\/:]([\w\d\.]+)?/)||l.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||l.match(/(rv):([\w\d\.]+)/)||[null,"unknown",0];"rv"===ca[1]&&(ca[1]="ie");/*
 Copyright 2017 Glance Networks, Inc.
*/
function da(a){var b=new Date;b=b.getUTCFullYear()+"/"+(b.getUTCMonth()+1)+"/"+b.getUTCDate()+" "+h(b.getUTCHours())+":"+h(b.getUTCMinutes())+":"+h(b.getUTCSeconds())+" ";for(var c=0;c<a.length;c++)b+=("object"===typeof a[c]?JSON.stringify(a[c]):a[c])+" ";return b}function m(a){window.console&&window.console.log&&(window.GLANCE_COBROWSE?!window.GLANCE_COBROWSE.disableLogging:1)&&window.console.log(da(arguments))};/*
 Copyright (c) 2021 Glance Networks, Inc.
*/
var p=p||{};window.GLANCE=window.GLANCE||{};window.GLANCE.VERSION="5.3.0.118";window.GLANCE.PATCH="";var q=navigator.userAgent.toLowerCase(),ea=navigator.platform.toLowerCase(),r=q.match(/(edge)[\s\/:]([\w\d\.]+)?/)||q.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||q.match(/(rv):([\w\d\.]+)/)||[null,"unknown",0];"rv"===r[1]&&(r[1]="ie");
var t={extend:Function.prototype.extend,name:"version"==r[1]?r[3]:r[1],version:"ie"==r[1]&&document.documentMode||parseFloat("opera"==r[1]&&r[4]?r[4]:r[2]),v:{name:q.match(/ip(?:ad|od|hone)/)?"ios":(q.match(/(?:webos|android)/)||ea.match(/mac|win|linux/)||["other"])[0]},V:{$:!!document.evaluate,X:!!window.Z,query:!!document.querySelector,json:!!window.JSON},W:{}};
document.documentMode&&window.XDomainRequest?(t.name="ie",t.version=document.documentMode):window.navigator&&navigator.appVersion&&-1!=navigator.appVersion.indexOf("MSIE 7.")&&(t.name="ie",t.version="7");t[t.name]=!0;t[t.name+parseInt(t.version,10)]=!0;t.v[t.v.name]=!0;
if("undefined"!==typeof window.Prototype&&1.7>parseFloat(window.Prototype.Version.substr(0,3))&&"undefined"!==typeof Array.prototype.toJSON)var v=function(a){var b=Array.prototype.toJSON;delete Array.prototype.toJSON;a=JSON.stringify(a);Array.prototype.toJSON=b;return a};void 0===v&&(v=function(a){return JSON.stringify(a)});
function fa(a){a.onmessage=function(b){b=JSON.parse(b.data);a.D&&a.D(b)};a.u=function(b){b=v(b);a.send(b)};a.M=function(b){return b&&b.code||0};a.N=function(b){return b&&b.reason||""}}
function ha(a){var b={};if(p.T)var c=new w(a);else t.ie9&&"http:"===window.location.protocol&&(b.protocols_whitelist=["iframe-eventsource","iframe-htmlfile"]),c=new SockJS(a,"",b);c.l=0;c.J=function(){c.A();c.transport&&!c.transport.match(/^iframe-/)&&(c.B=window.setInterval(function(){c.l++;c.S&&c.S({l:c.l})},15E3))};c.A=function(){c.B&&window.clearInterval(c.B)};fa(c);c.onclose=function(d){c.A();c.P&&c.P(d)};c.onheartbeat=function(){c.l=0;c.J();c.R&&c.R()};return c}
function x(a,b){window.setTimeout(function(){x(a,b)},100)}function w(a){this.readyState=SockJS.CONNECTING;this.a=Math.round(1E6*Math.random());x({from:"GSockJSProxy",sockid:this.a,cmd:"open",url:a})}w.prototype.send=function(a){x({from:"GSockJSProxy",sockid:this.a,cmd:"send",data:a})};w.prototype.close=function(){this.readyState=SockJS.CLOSING;x({from:"GSockJSProxy",sockid:this.a,cmd:"close"})};
function y(a,b,c){void 0!==a&&(c=c||Object.keys(a),c.forEach(function(d){void 0!==a[d]&&(b[d]=a[d])}))}function ia(a){var b=a.func.split(".");if(2>b.length)z("ERR_BADINVOKE:");else if("GLANCE"===b[0]||"GLANCE_COBROWSE"===b[0]&&"Custom"===b[1]){for(var c=window[b[0]],d=1;d<b.length;d++)if(c=c[b[d]],!c){z("ERR_UNDEFINVOKE:"+b[d]);return}a.args=a.args||{};a.args.remote=!0;c(a.args)}else z("ERR_BADINVOKE:"+b[0])}
function A(){p.T?this.f=new B("JSON"):this.a=this.g();this.response=null;this.type="JSON"}A.prototype.g=function(){return new window.XMLHttpRequest};window.Sarissa&&Sarissa._SARISSA_IS_IE&&!(new window.XMLHttpRequest).withCredentials&&!window.XDomainRequest&&(A.prototype.g=function(){C("Sarissa");return Sarissa.originalXMLHttpRequest?new Sarissa.originalXMLHttpRequest:new window.XMLHttpRequest});A.prototype.abort=function(){this.f?this.f.abort():this.a.abort()};
A.prototype.onreadystatechange=function(){if(4==this.a.readyState){window.clearTimeout(this.h);delete this.h;var a="error";if(0==this.a.status)C(this.method+" to "+this.url+" failed: network"),this.b(!0,"connection",this.a.status);else if(200!==this.a.status){z(this.method+" to "+this.url+" failed with status: "+this.a.status);"text"===this.a.responseType&&null!==this.a.responseText&&C(this.a.responseText);if(401===this.a.status||403===this.a.status)a="authorization",this.c&&this.c.Y();this.b(!1,
a,this.a.status)}else{if(""!==this.a.response){if("XML"===this.accept)this.response=this.a.responseXML&&this.a.responseXML.documentElement,null===this.response&&z("Invalid XML response: "+this.a.responseText);else if(this.m){for(var b=new Uint8Array(this.a.responseText.length),c=0;c<this.a.responseText.length;c++)b[c]=this.a.responseText.charCodeAt(c)&255;this.response=new Blob([b],{type:this.a.getResponseHeader("Content-Type")})}else if("blob"===this.a.responseType)this.response=this.a.response;
else if(this.a.responseXML)this.response=ja(this.a.responseXML.childNodes[0].childNodes[0].nodeValue);else if("HTML"===this.accept||"TEXT"===this.accept)this.response=this.a.responseText;else if(this.response=ja(this.a.responseText),null===this.response){C(this.method+" to "+this.url+" failed - can't parse response "+this.a.responseText);this.b(!1,a);return}if(void 0!==this.response.err&&void 0!==this.response.msg){C(this.method+" to "+this.url+" failed with error:"+this.response.err+" "+this.response.msg);
this.b(!1,a);return}}this.onsuccess(this.response)}}};function ja(a){var b=null;try{b=JSON.parse(a)}catch(c){return C("JSON parse failed with error: "+c.toString()+" parsing: "+a),null}return b}A.prototype.getResponseHeader=function(a){return this.a.getResponseHeader(a)};A.prototype.get=function(a,b,c,d,g){this.method="GET";F(this,a,null,b,c,d,g)};
function F(a,b,c,d,g,f,e){a.url=b;a.onsuccess=void 0!==f?f:function(){};a.b=void 0!==e?e:function(){};a.method=a.method||"POST";if(a.f)ka(a.f,b,c,d,g,f,e);else{f=a.o||("JSON"===a.type?"application/json; charset=utf-8":"application/x-www-form-urlencoded; charset=utf-8");if("string"===typeof c)var u=c;else c instanceof Blob?(f=c.type,u=c):c&&(u="JSON"===a.type?v(c):"data="+v(c));t.safari&&a.j&&(a.h=window.setTimeout(function(){C(this.method+" to "+this.url+" failed - timedout (Safari)");this.b(!1,"timedout")}.bind(a),
a.j));a.a.onreadystatechange=function(){a.onreadystatechange()};try{a.a.open(a.method,b,d),void 0!==a.i&&a.a.setRequestHeader("Accept",a.i),void 0!==a.a.setRequestHeader&&"GET"!==a.method&&a.a.setRequestHeader("Content-type",f),a.c&&a.c.O()&&a.a.setRequestHeader("Authorization","Bearer "+a.c.O()),a.a.withCredentials=g,a.a.send(u)}catch(k){C(a.method+" to "+b+" failed with: "+k.toString()),a.b(!1,k.toString())}}}function B(a){this.type=a}
function ka(a,b,c,d,g,f,e){a.onsuccess=f;a.b=e;x({from:"IFrameProxyRequest",type:a.type,url:b,obj:c,async:d,withcred:g})}B.prototype.abort=function(){B.postMessage({from:"IFrameProxyRequest",abort:!0})};function G(a){this.name=a}function la(a,b){var c=new Date;c.setUTCHours(c.getUTCHours()+8);localStorage.setItem(a.name,v(b));localStorage.setItem(a.name+"_exp",c.toGMTString())}function ma(a){if(!na(a))return null;a=localStorage.getItem(a.name);return JSON.parse(a)}
function oa(a,b){var c=new Date;c.setUTCMinutes(c.getUTCMinutes()+b);localStorage.setItem(a.name+"_exp",c.toGMTString())}G.prototype.get=function(){return na(this)?localStorage.getItem(this.name):null};function pa(a){localStorage.removeItem(a.name);localStorage.removeItem(a.name+"_exp")}function na(a){var b=localStorage.getItem(a.name+"_exp");if(!b)return!1;b=new Date(b);return b<new Date?(pa(a),!1):!0}
function H(){var a=window;this.a=a.document;this.b=a;var b=[["hidden","visibilitychange"],["mozHidden","mozvisibilitychange"],["webkitHidden","webkitvisibilitychange"],["msHidden","msvisibilitychange"],["oHidden","ovisibilitychange"]];for(a=0;a<b.length;a++)if(b[a][0]in document){this.c=b[a][0];this.f=b[a][1];break}}
function qa(a,b){var c=[["src","//www.glancecdn.net/cobrowse/js/sockjs1.0.2.min.js"]],d=a.a.createElement("script");b&&d.addEventListener("load",b);d.setAttribute("type","text/javascript");d.setAttribute("charset","UTF-8");for(b=0;b<c.length;b++)d.setAttribute(c[b][0],c[b][1]);a.a.head.appendChild(d)}function I(a){return void 0===a.c?!1:a.a[a.c]}function ra(a,b){a.addEventListener(a.f,b)}H.prototype.head=function(){return void 0!==this.a.head?this.a.head:sa("getElementsByTagName",this.a,"head")[0]};
H.prototype.scrollTo=function(a,b,c){if(void 0!==window.pageXOffset)var d={x:Math.round(this.b.pageXOffset),y:Math.round(this.b.pageYOffset)};else if(void 0!==document.documentElement.scrollTop)d={x:this.a.documentElement.scrollLeft,y:this.a.documentElement.scrollTop};else if(void 0!==document.body.scrollLeft)d={x:this.a.body.scrollLeft,y:this.a.body.scrollTop};else throw Error("Can't get page scroll");d[a]=b;a={left:d.x,top:d.y,behavior:c?"smooth":"auto"};t.ie11||t.edge?window.scrollTo(d.x,d.y):
window.scrollTo(a)};H.prototype.addEventListener=function(a,b,c){this.a.addEventListener(a,b,c)};H.prototype.removeEventListener=function(a,b,c){this.a.removeEventListener(a,b,c)};function z(a){window.console&&window.console.error&&window.console.error(a)}function C(a){window.console&&window.console.log&&(window.GLANCE_COBROWSE?!window.GLANCE_COBROWSE.disableLogging:1)&&window.console.log(a)}function J(a){this.a=a}J.prototype.addEventListener=function(a,b,c){this.a.addEventListener(a,b,c)};
J.prototype.removeEventListener=function(a,b,c){this.a.removeEventListener(a,b,c)};function sa(a,b,...c){return J.b&&J.a&&b.nodeType?"#document"===b.nodeName?J.a.document[a].apply(b,c):"#document-fragment"===b.nodeName?J.a.DocumentFragment.prototype[a].apply(b,c):J.a.document.body[a].apply(b,c):J.b&&J.a&&"[object Window]"===b.toString()?J.a.window[a].apply(b,c):b[a].apply(b,c)}function ta(a,b,c){a.a.style.left=b+"px";a.a.style.top=c+"px"}
J.prototype.moveTo=function(a,b){function c(){u++<d?(f+=k,e+=n,ta(g,Math.floor(f),Math.floor(e)),g.b=window.setTimeout(c,200/d)):ta(g,a,b)}var d=10;void 0!==this.b&&window.clearTimeout(this.b);var g=this,f=parseInt(this.a.style.left),e=parseInt(this.a.style.top);isNaN(f)&&(f=-999);isNaN(e)&&(e=-999);var u=0;d=10;var k=(a-f)/d,n=(b-e)/d;0===k&&0===n||c()};function ua(a,b){if(void 0!==a){var c=c||Object.keys(a);c.forEach(function(d){void 0!==a[d]&&(b[d]=a[d])})}}function va(a){var b={};if(!a)return b;var c=0;for(a=a.attributes;c<a.length;c++){var d=a[c].nodeName.match(/data-(.*)/);d&&2===d.length&&(b[d[1]]=a[c].nodeValue)}return b}function wa(){var a=window.GLANCE_COBROWSE?window.GLANCE_COBROWSE:{},b=document.getElementById("glance-cobrowse"),c=va(document.getElementById("cobrowsescript"));b=va(b);ua(c,a);ua(b,a);return a};function K(){}
function xa(a,b){a.o="undefined"===typeof WebSocket;a.a={};a.a.ws="www.glance.net";a.a.site="production";a.g=new H;y(wa(),a.a);y(b,a.a);delete a.a.presenceserver;a.m=[];a.f=L;a.h=new G("glance_presence");var c=ma(a.h);c&&(0===["visitorid","ws","groupid"].filter(d=>c[d]!==a.a[d]).length?a.c=c.directserver:window.console&&window.console.log&&window.console.log("PRES:","Ignoring glance_presence entry for different visitor",c));window.console&&window.console.log&&window.console.log("PRES:","direct server from local storage:",
a.c)}var L=1;K.prototype.C=function(){};function M(a,b,c,d,g){if(b&&!a.c)m("ERR_NODIRECTSERVER");else{var f=(g||"https")+"://"+(b?a.c:a.a.presenceserver)+"/"+c;d&&(f+="?",["groupid","visitorid"].forEach(function(e){f+=e+"="+a.a[e]+"&"}));return f}}K.prototype.F=function(a){N(this,"findvisitor","GET",a)};
function O(a){m("connecting to "+a.c);var b=!1;a.o&&!window.SockJS?qa(a.g,function(){b||(window.console&&window.console.log&&window.console.log("PRES:","sockjs script added"),b=!0,window.SockJS?O(a):m("ERR_NOSOCKJS"))}):(a.b&&a.b.close(),a.b=ya(a),a.b.G=a.c,a.b.onopen=function(){window.console&&window.console.log&&window.console.log("PRES:","sock onopen, sending connect");a.b.u({type:"connect",authorization:void 0,groupid:a.a.groupid,visitorid:a.a.visitorid,guesttoken:a.a.guesttoken,version:ba});
window.console&&window.console.log&&window.console.log("PRES:","sending message queue");a.m.forEach(function(c){a.b.u(c)});a.m=[];a.f=3},a.b.D=function(c){m("received:"+v(c));if(a.b){var d=c.mtype||c.type,g=c.data;switch(d){case "connected":if(a.a.nokeepalive)break;window.console&&window.console.log&&window.console.log("PRES:","Keepalive interval: "+c.keepalive);a.i||(a.i=window.setInterval(function(){a.b.u({type:"k"})},1E3*c.keepalive));break;case "invoke":"visitor"===a.I&&ia(g);break;case "redirect":case "serverclose":g||
(g=c);default:if(a["on"+d])a["on"+d](g)}}else window.console&&window.console.log&&window.console.log("PRES:","Ignoring message received after socket close")},a.b.onclose=function(c){a.b===this&&(m("Connection closed, reconnecting",this.M(c),this.N(c)),za(a),window.setTimeout(function(){a.connect()},2E3))},a.b.onerror=function(c){a.b===this&&(window.console&&window.console.log&&window.console.log("PRES:","socket error"),a.o=!0,a.b.onclose(c))})}
function N(a,b,c,d){function g(k){var n=k&&(k.directserver||k.direct);n&&(e.c=n,k.httpsport&&(e.c+=":"+k.httpsport),e.C());e.b&&e.c!=e.b.G&&(window.console&&window.console.log&&window.console.log("PRES:","switching connection from "+e.b.G+" to "+e.c),O(e));if(d&&d.onsuccess)d.onsuccess(k)}function f(k,n){m(b,"failed");if(d.onfail)d.onfail(n);else P(e,{error:"connfail",detail:n})}var e=a,u=new A;u.c=void 0;u.method=c;m(b,JSON.stringify(d));(function(k){if(e.a.presenceserver)return k();var n=new G("glance_visitor_settings_"+
e.a.groupid+"_"+e.a.site),D=ma(n);if(D)return e.a.presenceserver=D.presenceserver,e.a.presenceserver||m("PRES_DISABLED (from cache)"),k();D=new A;var Ca="https://"+e.a.ws+"/services/authorizationservice/GetVisitorSettings3?groupid="+e.a.groupid+"&site="+e.a.site+"&service=presence";D.method="GET";F(D,Ca,null,!0,!1,function(U){e.a.presenceserver=U.presenceUrl;window.console&&window.console.log&&window.console.log("PRES:","presence service: "+e.a.presenceserver);e.a.presenceserver||m("PRES_DISABLED");
var E={};E.presenceserver=e.a.presenceserver;E.presencesettings=U;la(n,E);oa(n,1440);return k()},function(U,E){m("PRES_UNAVAILABLE "+E);k()})})(function(){e.a.presenceserver&&F(u,M(e,!1,b,!0),d.data?d.data:{},!0,!0,g,f)})}function Q(a){window.console&&window.console.log&&window.console.log("PRES:","closewebsocket");a.b&&a.b.close();za(a)}function za(a){a.i&&(window.clearInterval(a.i),delete a.i);a.f=L;delete a.b;delete a.c}
function R(a,b){m("sending",b.type,a.f);3===a.f?(window.console&&window.console.log&&window.console.log("PRES:","sending message: "+JSON.stringify(b)),a.b.u(b)):(window.console&&window.console.log&&window.console.log("PRES:","queuing message: "+JSON.stringify(b)),a.m.push(b),a.connect())}
K.prototype.connect=function(){if(this.a.visitorid)if(this.f!==L)window.console&&window.console.log&&window.console.log("PRES:","connect() called when already connecting or connected");else{this.f=2;window.console&&window.console.log&&window.console.log("PRES:","connect");var a=this;this.onscaledown=function(){a.disconnect();a.connect()};this.onredirect=function(b){window.console&&window.console.log&&window.console.log("PRES:","Connected to wrong instance:",JSON.stringify(b),"current direct server:",
this.c);this.h&&b.direct!==this.c&&(pa(this.h),this.h=new G("glance_presence"),this.disconnect(),window.setTimeout(()=>{this.connect()},2E3))};this.onserverclose=function(){a.disconnect();if(a.onclose)a.onclose()};this.c?O(this):this.F({onsuccess:function(){m("found visitor, connect");O(a)},onfail:function(b){P(a,{error:"connfail",detail:b});a.f=L}})}else m("CONN_NOVISITORID")};K.prototype.connect=K.prototype.connect;K.prototype.disconnect=function(){Q(this)};K.prototype.disconnect=K.prototype.disconnect;
function P(a,b){m("Error: ",JSON.stringify(b));if(a.onerror)a.onerror(b)}K.prototype.L=function(a,b){R(this,{type:a,data:b})};K.prototype.fire=K.prototype.L;function S(a){xa(this,a);this.I="visitor";this.g=new H;this.H=!1;var b=this;sa("addEventListener",window,"focus",function(){window.console&&window.console.log&&window.console.log("PRES:","presence visitor got focus event");b.j=!1;b.U&&b.s()},void 0);ra(this.g,function(){if(!b.H&&(window.console&&window.console.log&&window.console.log("PRES:","visibility:",I(b.g)?"hidden":"visible"),3===b.f&&!b.j)){var c={type:"visibility"};c.data={visibility:I(b.g)?"hidden":"visible"};R(b,c);I(b.g)&&Q(b)}});S.instance=
this}var Aa=S,T=["GLANCE","Presence","Visitor"],V=aa;T[0]in V||"undefined"==typeof V.execScript||V.execScript("var "+T[0]);for(var W;T.length&&(W=T.shift());)T.length||void 0===Aa?V[W]&&V[W]!==Object.prototype[W]?V=V[W]:V=V[W]={}:V[W]=Aa;S.prototype=new K;S.prototype.C=function(){window.console&&window.console.log&&window.console.log("PRES:","caching direct server:",this.c);var a={};a.directserver=this.c;a.groupid=this.a.groupid;a.visitorid=this.a.visitorid;a.ws=this.a.ws;la(this.h,a);oa(this.h,20)};
S.prototype.s=function(a){window.console&&window.console.log&&window.console.log("PRES:","presence");if(this.a.visitorid){var b={};y(this.a,b,["groupid","visitorid"]);var c={},d;for(d in this.a)0===d.indexOf("user-")&&(c[d.substring(5)]=this.a[d]);c.url=window.location.href;c.browser=t.name;c.browserver=t.version;c.platform=t.v.name;(a=a&&a.data)&&y(a,c);b.data=c;this.j||(c={type:"presence"},c.data=b.data,R(this,c),this.U=!0)}else m("PRES_NOVISITORID")};S.prototype.presence=S.prototype.s;
S.prototype.K=function(a){var b=this;this.H=!0;N(this,"uniquevisitor","GET",{onsuccess:function(c){m("got unique visitor id",c.visitorid);b.a.visitorid=c.visitorid;b.a.guesttoken=c.guesttoken;if(b.onuniqueid)b.onuniqueid(c.uniqueid);b.connect();a&&a.data&&b.s({data:a.data})},onfail:function(c){P(b,{error:"connfail",detail:c})}})};S.prototype.connectUnique=S.prototype.K;function ya(a){a.o?a=ha(M(a,!0,"visitor")):(a=M(a,!0,"visitorws",!1,"wss"),a=new WebSocket(a),fa(a));return a}
S.prototype.F=function(a){a.data={};N(this,"presence","POST",a)};S.prototype.onblur=function(){m("BLURRED");this.j=!0;Q(this)};var Ba=!1;function X(){if(!Ba){Ba=!0;var a=wa();if(a.presence&&"api"!==a.presence){var b=new S;b.onerror=function(c){"connfail"===c.error&&window.setTimeout(function(){b.connect()},5E3)};b.s()}}}var Y=new H;Y.b.addEventListener&&(document.readyState.match(/complete/)?X():(Y.b.addEventListener("load",X),Y.a.addEventListener("DOMContentLoaded",X,!1)));}).call(window);
